# FundMe - æ™ºèƒ½åˆçº¦ä¼—ç­¹å¹³å°

ä¸€ä¸ªåŸºäºä»¥å¤ªåŠçš„å»ä¸­å¿ƒåŒ–ä¼—ç­¹å¹³å°ï¼Œæ”¯æŒæ—¶é—´çª—å£æ§åˆ¶ã€ç›®æ ‡é‡‘é¢éªŒè¯ã€è‡ªåŠ¨é€€æ¬¾æœºåˆ¶å’Œ ERC20 ä»£å¸é›†æˆã€‚

## ğŸš€ é¡¹ç›®æ¦‚è¿°

FundMe æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½åˆçº¦ä¼—ç­¹è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š

- **â° æ—¶é—´çª—å£æ§åˆ¶**: æ”¯æŒè®¾ç½®ä¼—ç­¹æœŸé™ï¼Œåˆ°æœŸåè‡ªåŠ¨å…³é—­æŠ•èµ„
- **ğŸ’° ç›®æ ‡é‡‘é¢éªŒè¯**: åŸºäº Chainlink ä»·æ ¼é¢„è¨€æœºå®æ—¶è®¡ç®— USD ä»·å€¼
- **ğŸ”’ æƒé™ç®¡ç†**: ä»…åˆçº¦æ‰€æœ‰è€…å¯ä»¥æå–è¾¾åˆ°ç›®æ ‡çš„èµ„é‡‘
- **ğŸ’¸ è‡ªåŠ¨é€€æ¬¾**: æœªè¾¾åˆ°ç›®æ ‡æ—¶æŠ•èµ„è€…å¯ç”³è¯·é€€æ¬¾
- **ğŸª™ ERC20 ä»£å¸é›†æˆ**: æ”¯æŒä»£å¸å¥–åŠ±å’Œé”€æ¯æœºåˆ¶
- **ğŸ“Š å®Œæ•´æµ‹è¯•è¦†ç›–**: åŒ…å«å…¨é¢çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ™ºèƒ½åˆçº¦ç»“æ„

```
contracts/
â”œâ”€â”€ FundMe.sol                    # ä¸»åˆçº¦ - ä¼—ç­¹æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ FundTokenERC20.sol           # ERC20 ä»£å¸åˆçº¦ - å¥–åŠ±ä»£å¸
â””â”€â”€ mocks/
    â””â”€â”€ MockV3Aggregator.sol     # Chainlink ä»·æ ¼é¢„è¨€æœºæ¨¡æ‹Ÿ
```

### æ ¸å¿ƒåˆçº¦åŠŸèƒ½

#### FundMe.sol - ä¸»åˆçº¦

- **æŠ•èµ„åŠŸèƒ½** (`fund()`): æ¥æ”¶ ETH æŠ•èµ„ï¼ŒéªŒè¯é‡‘é¢å’Œæ—¶é—´çª—å£
- **èµ„é‡‘æå–** (`getFund()`): æ‰€æœ‰è€…æå–è¾¾åˆ°ç›®æ ‡çš„èµ„é‡‘
- **é€€æ¬¾æœºåˆ¶** (`refund()`): æŠ•èµ„è€…ç”³è¯·é€€æ¬¾
- **æ‰€æœ‰æƒç®¡ç†** (`transferOwnership()`): è½¬ç§»åˆçº¦æ‰€æœ‰æƒ
- **ERC20 é›†æˆ** (`setErc20Addr()`): è®¾ç½®ä»£å¸åˆçº¦åœ°å€

#### FundTokenERC20.sol - ä»£å¸åˆçº¦

- **ä»£å¸é“¸é€ ** (`mint()`): åŸºäºæŠ•èµ„é‡‘é¢é“¸é€ ä»£å¸
- **ä»£å¸é”€æ¯** (`claim()`): ä½¿ç”¨åé”€æ¯ä»£å¸
- **æƒé™æ§åˆ¶**: ä»… FundMe åˆçº¦å¯è°ƒç”¨ç‰¹å®šåŠŸèƒ½

## ğŸ“‹ æ ¸å¿ƒå‚æ•°é…ç½®

| å‚æ•°                  | å€¼       | è¯´æ˜         |
| --------------------- | -------- | ------------ |
| `MINIMUM_VALUE`       | 100 USD  | æœ€ä½æŠ•èµ„é‡‘é¢ |
| `TARGET`              | 1000 USD | ä¼—ç­¹ç›®æ ‡é‡‘é¢ |
| `LOCK_TIME`           | 300 ç§’   | ä¼—ç­¹æ—¶é—´çª—å£ |
| `CONFIRMATION_BLOCKS` | 5        | ç¡®è®¤åŒºå—æ•°   |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å¼€å‘æ¡†æ¶**: Hardhat
- **æ™ºèƒ½åˆçº¦**: Solidity 0.8.20
- **æµ‹è¯•æ¡†æ¶**: Mocha + Chai
- **ä»·æ ¼é¢„è¨€æœº**: Chainlink AggregatorV3
- **ä»£å¸æ ‡å‡†**: ERC20 (OpenZeppelin)
- **ç½‘ç»œæ”¯æŒ**: ä»¥å¤ªåŠä¸»ç½‘/æµ‹è¯•ç½‘

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- npm æˆ– yarn
- Git

### å®‰è£…ä¾èµ–

```bash
git clone <repository-url>
cd FundMe
npm install
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# Alchemy API å¯†é’¥ (ç”¨äº Sepolia æµ‹è¯•ç½‘)
ALCHEMY_API_KEY=your_alchemy_api_key

# ç§é’¥é…ç½® (ä¸è¦åŒ…å« 0x å‰ç¼€)
PRIVATE_KEY=your_private_key
PRIVATE_KEY_2=your_second_private_key
PRIVATE_KEY_3=your_third_private_key

# Etherscan API å¯†é’¥ (ç”¨äºåˆçº¦éªŒè¯)
ETHERSCAN_API_KEY=your_etherscan_api_key
```

### ç¼–è¯‘åˆçº¦

```bash
npx hardhat compile
```

### è¿è¡Œæµ‹è¯•

```bash
# ä½¿ç”¨å†…ç½®ç½‘ç»œæµ‹è¯• (æ¨è)
npx hardhat test

# ä½¿ç”¨æœ¬åœ°èŠ‚ç‚¹æµ‹è¯•
npx hardhat node
npx hardhat test --network local

# ä½¿ç”¨ Sepolia æµ‹è¯•ç½‘
npx hardhat test --network sepolia
```

### éƒ¨ç½²åˆçº¦

```bash
# éƒ¨ç½²åˆ°æœ¬åœ°ç½‘ç»œ
npx hardhat deploy --network local

# éƒ¨ç½²åˆ° Sepolia æµ‹è¯•ç½‘
npx hardhat deploy --network sepolia
```

## ğŸ“ ä½¿ç”¨æŒ‡å—

### 1. ä¼—ç­¹æŠ•èµ„æµç¨‹

```javascript
// 1. æŠ•èµ„ ETH (éœ€è¦æ»¡è¶³æœ€ä½é‡‘é¢è¦æ±‚)
await fundMe.fund({ value: ethers.parseEther("0.05") });

// 2. æŸ¥çœ‹æŠ•èµ„è®°å½•
const balance = await fundMe.fundersToAmount(investorAddress);
```

### 2. èµ„é‡‘æå–æµç¨‹

```javascript
// ä»…åˆçº¦æ‰€æœ‰è€…å¯è°ƒç”¨ï¼Œéœ€è¦æ»¡è¶³æ¡ä»¶ï¼š
// - æŠ•èµ„çª—å£å·²å…³é—­
// - è¾¾åˆ°ç›®æ ‡é‡‘é¢
await fundMe.getFund();
```

### 3. é€€æ¬¾æµç¨‹

```javascript
// æŠ•èµ„è€…å¯è°ƒç”¨ï¼Œéœ€è¦æ»¡è¶³æ¡ä»¶ï¼š
// - æŠ•èµ„çª—å£å·²å…³é—­
// - æœªè¾¾åˆ°ç›®æ ‡é‡‘é¢
// - æœ‰æŠ•èµ„è®°å½•
await fundMe.refund();
```

### 4. ä»£å¸æ“ä½œ

```javascript
// é“¸é€ ä»£å¸ (åŸºäºæŠ•èµ„é‡‘é¢)
await fundToken.mint(amountToMint);

// é”€æ¯ä»£å¸ (ä½¿ç”¨å)
await fundToken.claim(amountToClaim);
```

## ğŸ§ª æµ‹è¯•è¦†ç›–

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ï¼š

### æŠ•èµ„åŠŸèƒ½æµ‹è¯•

- âœ… æŠ•èµ„çª—å£å…³é—­æ—¶æŠ•èµ„å¤±è´¥
- âœ… æŠ•èµ„é‡‘é¢ä¸è¶³æ—¶æŠ•èµ„å¤±è´¥
- âœ… æ­£å¸¸æŠ•èµ„æˆåŠŸ

### èµ„é‡‘æå–æµ‹è¯•

- âœ… éæ‰€æœ‰è€…æå–å¤±è´¥
- âœ… çª—å£æœªå…³é—­æ—¶æå–å¤±è´¥
- âœ… æœªè¾¾åˆ°ç›®æ ‡æ—¶æå–å¤±è´¥
- âœ… æ¡ä»¶æ»¡è¶³æ—¶æå–æˆåŠŸ

### é€€æ¬¾åŠŸèƒ½æµ‹è¯•

- âœ… çª—å£æœªå…³é—­æ—¶é€€æ¬¾å¤±è´¥
- âœ… è¾¾åˆ°ç›®æ ‡æ—¶é€€æ¬¾å¤±è´¥
- âœ… æ— æŠ•èµ„è®°å½•æ—¶é€€æ¬¾å¤±è´¥
- âœ… æ¡ä»¶æ»¡è¶³æ—¶é€€æ¬¾æˆåŠŸ

## ğŸ”§ è‡ªå®šä¹‰ä»»åŠ¡

é¡¹ç›®æä¾›äº†ä¾¿æ·çš„ Hardhat ä»»åŠ¡ï¼š

### éƒ¨ç½²ä»»åŠ¡

```bash
npx hardhat deploy-fundme --network sepolia
```

### äº¤äº’ä»»åŠ¡

```bash
npx hardhat interact-fundme --addr <contract-address>
```

## ğŸŒ ç½‘ç»œé…ç½®

### æ”¯æŒçš„ç½‘ç»œ

| ç½‘ç»œ      | ç”¨é€”     | ç‰¹ç‚¹                     |
| --------- | -------- | ------------------------ |
| `hardhat` | å¼€å‘æµ‹è¯• | å†…å­˜åŒºå—é“¾ï¼Œå¿«é€Ÿæµ‹è¯•     |
| `local`   | æœ¬åœ°å¼€å‘ | æŒä¹…åŒ–æ•°æ®ï¼ŒçœŸå®ç¯å¢ƒæ¨¡æ‹Ÿ |
| `sepolia` | æµ‹è¯•ç½‘   | çœŸå®æµ‹è¯•ç½‘ç»œ             |

### ç½‘ç»œé…ç½®ç¤ºä¾‹

```javascript
// hardhat.config.js
networks: {
  hardhat: {
    chainId: 31337,
  },
  sepolia: {
    url: `https://eth-sepolia.g.alchemy.com/v2/${process.env.ALCHEMY_API_KEY}`,
    accounts: [process.env.PRIVATE_KEY],
    chainId: 11155111,
  },
}
```

## ğŸ“Š äº‹ä»¶ç³»ç»Ÿ

åˆçº¦å®šä¹‰äº†ä»¥ä¸‹äº‹ä»¶ç”¨äºå‰ç«¯ç›‘å¬ï¼š

```solidity
event FundWithdrawByOwner(uint256 amount);
event RefundByFunder(address funder, uint256 amount);
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **é‡å…¥æ”»å‡»é˜²æŠ¤**: ä½¿ç”¨ `call` æ–¹æ³•è¿›è¡Œ ETH è½¬è´¦
- **æƒé™æ§åˆ¶**: ä¿®é¥°ç¬¦ç¡®ä¿å‡½æ•°è°ƒç”¨æƒé™
- **æ—¶é—´çª—å£**: é˜²æ­¢è¿‡æœŸæ“ä½œ
- **é‡‘é¢éªŒè¯**: åŸºäºå®æ—¶ä»·æ ¼é¢„è¨€æœºéªŒè¯

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥è¶…æ—¶é”™è¯¯**

   ```bash
   # æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ API å¯†é’¥
   # å°è¯•ä½¿ç”¨æœ¬åœ°ç½‘ç»œæµ‹è¯•
   npx hardhat test --network local
   ```

2. **Gas è´¹ç”¨ä¸è¶³**

   ```bash
   # ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ ETH
   # æ£€æŸ¥ç½‘ç»œé…ç½®
   ```

3. **åˆçº¦éªŒè¯å¤±è´¥**
   ```bash
   # æ£€æŸ¥æ„é€ å‡½æ•°å‚æ•°
   # ç¡®ä¿ç½‘ç»œå’Œåœ°å€æ­£ç¡®
   ```

### è°ƒè¯•æŠ€å·§

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
npx hardhat test --verbose

# æŸ¥çœ‹ Gas ä½¿ç”¨æƒ…å†µ
REPORT_GAS=true npx hardhat test
```

## ğŸ“„ è®¸å¯è¯

MIT License

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›®ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰è¯·è¿›è¡Œå……åˆ†çš„å®‰å…¨å®¡è®¡ã€‚
